{
 "absolute_value": 0,
 "align_labels_right": 1,
 "creation": "2025-03-21 17:49:22.591136",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Student Results",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\n<!DOCTYPE html>\\n<html>\\n<head>\\n    <style>\\n        .print-heading {\\n            display: flex; /* Use Flexbox for alignment */\\n            justify-content: space-between; /* Space between logo and heading */\\n            align-items: flex-start; /* Align items to the top */\\n            margin-bottom: 10px;\\n        }\\n        /*.logo {*/\\n            /*flex: 0 0 auto; */\\n            /*margin-right: 20px;*/\\n        /*}*/\\n        .logo img {\\n            height: 100px;  \\n            width: auto;  \\n            display: block; \\n            margin-top:0px;\\n        }\\n        .heading-content {\\n            text-align: right; /* Align heading text to the right */\\n            flex: 1; /* Allow heading to take remaining space */\\n        }\\n        .heading-content h2 {\\n            margin: 0; /* Remove default margins */\\n            padding: 0; /* Remove default padding */\\n           margin-top:-100px;\\n        }\\n        .heading-content .sub-heading {\\n            display: block; /* Ensure sub-heading is on a new line */\\n            margin-top: 5px; /* Add space between heading and sub-heading */\\n            font-size: 14px; /* Adjust font size as needed */\\n            color: #666; /* Optional: Change color for sub-heading */\\n        }\\n        hr {\\n            margin: 10px 0; /* Add vertical margins for hr element */\\n        }\\n    </style>\\n</head>\\n<body>\\n    <!--<div class=\\\"print-heading\\\">-->\\n    <!--     Logo Section -->\\n    <!--    <div class=\\\"logo\\\">-->\\n    <!--        <img src=\\\"/private/files/tnc_logo.png\\\" alt=\\\"Logo\\\">-->\\n    <!--    </div>-->\\n        \\n    <!--     Heading Section -->\\n    <!--    <div class=\\\"heading-content\\\">-->\\n    <!--        <h2>-->\\n    <!--            TNC Exam Result-->\\n    <!--            <small class=\\\"sub-heading\\\">-->\\n    <!--                {{ doc.name }}-->\\n    <!--            </small>-->\\n    <!--        </h2>-->\\n    <!--        <hr style=\\\"margin: 10px 0; \\\">-->\\n    <!--    </div>-->\\n    <!--</div>-->\\n</body>\\n</html>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<body>\\n    <div style=\\\"display: flex; justify-content: space-between; padding: 10px;\\\">\\n        <div style=\\\"width: 45%;\\\">\\n            <p style=\\\"margin: 5px 0; font-size: 16px;\\\">\\n                <strong>Student Name:</strong> {{ doc.student_name }}\\n            </p>\\n            <p style=\\\"margin: 5px 0; font-size: 16px;\\\">\\n                <strong>Student Mobile:</strong> {{doc.student_mobile}}\\n            </p>\\n        </div>\\n        <!--<div style=\\\"width: 45%; margin-right: -100px;\\\">-->\\n        <!--    <p style=\\\"margin: 5px 0; font-size: 16px;\\\">-->\\n        <!--        <strong>State:</strong> {{ doc.state }}-->\\n        <!--    </p>-->\\n        <!--    <p style=\\\"margin: 5px 0; font-size: 16px;\\\">-->\\n        <!--        <strong>District:</strong> {{ doc.district }}-->\\n        <!--    </p>-->\\n        <!--</div>-->\\n    </div>\\n</body>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"display: flex; align-items: center;\\\">\\n  <!-- Green Box with Black Border -->\\n  <div style=\\\"width: 30px; height: 13px; background-color: green; margin-right: 10px; border: 1px solid black;\\\"></div>\\n  <h5 style=\\\"font-weight: bold;\\\">Fantastic (Excellent performance)</h5>\\n</div>\\n\\n<div style=\\\"display: flex; align-items: center;\\\">\\n  <!-- Yellow Box with Black Border -->\\n  <div style=\\\"width: 30px; height: 13px; background-color: yellow; margin-right: 10px; border: 1px solid black;\\\"></div>\\n  <h5 style=\\\"font-weight: bold;\\\">Average (Satisfactory but Needs Improvement)</h5>\\n</div>\\n\\n<div style=\\\"display: flex; align-items: center;\\\">\\n  <!-- Red Box with Black Border -->\\n  <div style=\\\"width: 30px; height: 13px; background-color: red; margin-right: 10px; border: 1px solid black;\\\"></div>\\n  <h5 style=\\\"font-weight: bold;\\\">Needs hard work (Requires significant effort and attention)</h5>\\n</div>\\n\\n{% set total_exams = frappe.db.count('Student Results', {'student_id': doc.student_id}) %}\\n<h4 style='float:right;'>Total Exams: {{ total_exams }}</h4>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<style>\\n    table {\\n        width: 100%;\\n        border-collapse: collapse;\\n        margin-bottom: 20px;\\n        border: 1px solid black;\\n    }\\n    th, td {\\n        border: 1px solid #ddd;\\n        padding: 8px;\\n        text-align: left;\\n        border: 1px solid black;\\n    }\\n    th {\\n        background-color: #f4f4f4;\\n        font-weight: bold;\\n    }\\n    tbody tr:nth-child(even) {\\n        background-color: #f9f9f9;\\n    }\\n    h3 {\\n        border-bottom: 2px solid #333;\\n        padding-bottom: 5px;\\n        margin-bottom: 15px;\\n        font-size: 16px;\\n    }\\n</style>\\n\\n{# Step 1: Fetch the first active Bulk Sharing filter (not yet sent) #}\\n{% set bulk_whatsapp_data = frappe.get_all(\\n    \\\"Bulk whatsapp Sharing Results\\\",\\n    filters={\\\"sent\\\": 0,\\\"status\\\":\\\"Submitted\\\"},\\n    fields=[\\\"name\\\", \\\"from_date\\\", \\\"to_date\\\"]\\n) %}\\n{% if bulk_whatsapp_data %}\\n    {% set bulk = bulk_whatsapp_data[0] %}\\n    {% set bulk_doc = frappe.get_doc(\\\"Bulk whatsapp Sharing Results\\\", bulk.name) %}\\n    {% set from_date = bulk.from_date %}\\n    {% set to_date = bulk.to_date %}\\n    {% set series_list = bulk_doc.test_series %}\\n    {% set selected_series = series_list | map(attribute='test_series') | list %}\\n\\n    {# Step 2: Fetch Student Results matching the filters #}\\n    {% set results = frappe.get_all(\\n        \\\"Student Results\\\",\\n        filters={\\n            \\\"student_id\\\": doc.student_id,\\n            \\\"exam_date\\\": [\\\"between\\\", [from_date, to_date]],\\n            \\\"exam_name\\\": [\\\"in\\\", selected_series]\\n        },\\n        fields=[\\n            \\\"exam_name\\\", \\\"student_name\\\", \\\"student_mobile\\\", \\\"exam_date\\\",\\n            \\\"rank\\\", \\\"total_marks\\\", \\\"total_right\\\", \\\"total_wrong\\\",\\n            \\\"total_skip\\\", \\\"percentage\\\", \\\"exam_title_name\\\", \\\"rank_color\\\"\\n        ],\\n        order_by=\\\"exam_date desc\\\"\\n    ) %}\\n\\n    {# Step 3: Organize results by exam #}\\n    {% set exams = {} %}\\n    {% for record in results %}\\n        {% if record.exam_name not in exams %}\\n            {% set _ = exams.update({record.exam_name: []}) %}\\n        {% endif %}\\n        {% set _ = exams[record.exam_name].append(record) %}\\n    {% endfor %}\\n\\n    {% set color_dict = {\\\"G\\\": \\\"green\\\", \\\"Y\\\": \\\"yellow\\\", \\\"R\\\": \\\"red\\\"} %}\\n\\n    {# Step 4: Render results in tables grouped by exam name #}\\n    {% if exams %}\\n        {% for exam, records in exams.items() %}\\n            <h3>{{ exam }}</h3>\\n            <table style=\\\"font-size: 16px;\\\">\\n                <thead>\\n                    <tr>\\n                        <th>Exam Title</th>\\n                        <th>Exam Date</th>\\n                        <th>Rank</th>\\n                        <th>Total Marks</th>\\n                        <th>Total Right</th>\\n                        <th>Total Wrong</th>\\n                        <th>Total Skip</th>\\n                        <th>Percentage</th>\\n                    </tr>\\n                </thead>\\n                <tbody>\\n                    {% for record in records %}\\n                    <tr>\\n                        <td>{{ record.exam_title_name }}</td>\\n                        {% set exm_date = record.exam_date | string %}\\n                        <td>{{ exm_date[-2:] }}-{{ exm_date[5:7] }}-{{ exm_date[:4] }}</td>\\n                        {% if record.rank_color %}\\n                            <td style=\\\"background-color: {{ color_dict.get(record.rank_color, 'transparent') }}; font-weight: bold;\\\">\\n                                {{ record.rank }}\\n                            </td>\\n                        {% else %}\\n                            <td>{{ record.rank }}</td>\\n                        {% endif %}\\n                        <td>{{ record.total_marks }}</td>\\n                        <td>{{ record.total_right }}</td>\\n                        <td>{{ record.total_wrong }}</td>\\n                        <td>{{ record.total_skip }}</td>\\n                        <td>{{ record.percentage }}</td>\\n                    </tr>\\n                    {% endfor %}\\n                </tbody>\\n            </table>\\n        {% endfor %}\\n    {% else %}\\n        <p>No exam results found for selected filters.</p>\\n    {% endif %}\\n{% else %}\\n    <p>No active WhatsApp sharing filters found (sent = 0).</p>\\n{% endif %}\\n\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}]",
 "idx": 0,
 "line_breaks": 1,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-03-24 18:33:55.312998",
 "modified_by": "Administrator",
 "module": "TNC Custom App",
 "name": "Dynamic Student Print Format",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 1,
 "standard": "Yes"
}